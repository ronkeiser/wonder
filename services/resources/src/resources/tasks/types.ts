import type { tasks } from '~/schema';
import type { StepRow, RetryConfig } from '~/schema';

// Re-export for consumers
export type { StepRow as Step, RetryConfig };

/** Step input - id is generated by the RPC layer */
export type StepInput = Omit<StepRow, 'id'>;

/** Task entity â€” inferred from database schema. */
export type Task = typeof tasks.$inferSelect;

/** API input for creating a task. */
export type TaskInput = {
  name: string;
  description?: string;
  reference?: string;
  projectId?: string | null;
  libraryId?: string | null;
  inputSchema: Record<string, unknown>;
  outputSchema: Record<string, unknown>;
  steps: StepInput[];
  retry?: RetryConfig | null;
  timeoutMs?: number | null;
  autoversion?: boolean;
  force?: boolean;
};
